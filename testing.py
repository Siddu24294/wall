from script import Search
import re
import urllib.request,urllib.error

opener=urllib.request.build_opener()
opener.addheaders=[('User-Agent','Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/36.0.1941.0 Safari/537.36')]
identity=urllib.request.install_opener(opener)


"""https://stackoverflow.com/questions/47720520/cant-open-url-with-requests-and-urllib2
import requests

headers = {'User-Agent':'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.89 Safari/537.36'}

r = requests.get("https://www.collinsdictionary.com/browse/english/words-starting-with-a",headers=headers)"""

html='<!DOCTYPE html>\n<html lang="en">\n<head>\n<meta charset="utf-8">\n<meta name="viewport" content="width=device-width, initial-scale=1.0">\n<link href="/opensearch.xml" rel="search" title="WallpaperAccess" type="application/opensearchdescription+xml">\n<title>Wallpapers Search: monkey d. luffy - WallpaperAccess</title>\n<meta name="description" content="">\n<link rel="icon" type="image/png" href="/faviconw.png">\n<meta name="csrf-token" content="cd7f70a9d4afcc3e714253f0739e8dd4f23e552bf0a18bcd87b515fdd6b9cb38">\n<link async rel="stylesheet" type="text/css" href="/app.css?v=13" />\n<script>\n      window.appCallbacks = [];\n    </script>\n<script type="text/javascript" src="https://go.automatad.com/geo/I1Ssr0/afihbs.js" async></script>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>\n</head>\n<body>\n\n<div class="ui vertical inverted right sidebar menu">\n<a class="item header" style="font-size: 16px;" href="/">Home</a>\n<div class="item">\n<div class="header title" style="font-size: 16px;">Popular wallpapers&nbsp;&nbsp;\xe2\x96\xbe</div>\n<div class="menu content">\n<div class="flexbox" style="padding-top: 5px;padding-bottom: 5px">\n<div class="column">\n<div class="ui category_sidebar link list">\n<a title="4K iPhone Wallpapers" href="/4k-iphone" class="category_sidebar v2 item">4K iPhone</a>\n<a title="PUBG 4K Wallpapers" href="/pubg-4k" class="category_sidebar v2 item">PUBG 4K</a>\n<a title="Joker 4K Ultra HD Wallpapers" href="/joker-4k-ultra-hd" class="category_sidebar v2 item">Joker 4K Ultra HD</a>\n<a title="HD Phone Wallpapers" href="/hd-phone" class="category_sidebar v2 item">HD Phone</a>\n<a title="4K iPad Wallpapers" href="/4k-ipad" class="category_sidebar v2 item">4K iPad</a>\n<a title="4K Wallpapers" href="/4k" class="category_sidebar v2 item">4K</a>\n<a title="HD Wallpapers" href="/hd" class="category_sidebar v2 item">HD</a>\n<a title="4K Marvel Wallpapers" href="/4k-marvel" class="category_sidebar v2 item">4K Marvel</a>\n<a title="Anime Wallpapers" href="/anime" class="category_sidebar v2 item">Anime</a>\n<a title="BTS Wallpapers" href="/bts" class="category_sidebar v2 item">BTS</a>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="item">\n<div class="header title" style="font-size: 16px;">Recent wallpapers&nbsp;&nbsp;\xe2\x96\xbe</div>\n<div class="menu content">\n<div class="flexbox" style="padding-top: 5px;padding-bottom: 5px">\n<div class="column">\n<div class="ui category_sidebar link list">\n<a title="Stop Procrastinating Wallpapers" href="/stop-procrastinating" class="category_sidebar v2 item">Stop Procrastinating</a>\n<a title="Style iPhone Wallpapers" href="/style-iphone" class="category_sidebar v2 item">Style iPhone</a>\n<a title="Messi Face Wallpapers" href="/messi-face" class="category_sidebar v2 item">Messi Face</a>\n<a title="Lee Sung Kyung Desktop Wallpapers" href="/lee-sung-kyung-desktop" class="category_sidebar v2 item">Lee Sung Kyung Desktop</a>\n<a title="Space Marines Wallpapers" href="/space-marines" class="category_sidebar v2 item">Space Marines</a>\n<a title="Jimin Tumblr Wallpapers" href="/jimin-tumblr" class="category_sidebar v2 item">Jimin Tumblr</a>\n<a title="Romantic Anime 4K Wallpapers" href="/romantic-anime-4k" class="category_sidebar v2 item">Romantic Anime 4K</a>\n<a title="NYC Summer Wallpapers" href="/nyc-summer" class="category_sidebar v2 item">NYC Summer</a>\n<a title="Gdansk Wallpapers" href="/gdansk" class="category_sidebar v2 item">Gdansk</a>\n<a title="Epic Mickey 2 Wallpapers" href="/epic-mickey-2" class="category_sidebar v2 item">Epic Mickey 2</a>\n</div>\n</div>\n</div>\n</div>\n</div>\n<a class="item header" style="font-size: 16px;" href="/about">About Us</a>\n<a class="item header" style="font-size: 16px;" href="/faq">FAQ</a>\n<a class="item header" style="font-size: 16px;" href="/contact">Contact</a>\n<a class="item header" style="font-size: 16px;" href="/terms">Terms of Service</a>\n<a class="item header" style="font-size: 16px;" href="/privacy">Privacy Policy</a>\n</div>\n<div class="fixed main_menu">\n<div class="ui equal width middle aligned centered grid pad_horisont20">\n<div class="middle aligned equal width row">\n<div class="item" style="padding-left: 10px">\n<a href="/" class="ui header" style="font-size: 16px; font-weight: bold; line-height: 2.3;">WallpaperAccess</a>\n</div>\n<div class="fluid search column">\n<div class="ui fluid icon input">\n<form id="search_form" method="GET" action="/search"></form>\n<input id="search_input" form="search_form" name="q" type="text" placeholder="Search wallpapers" style="background-color: #F1F1F1; border: 0px;">\n<i class="search icon"></i>\n</div>\n</div>\n<div class="item" style="padding-left: 10px">\n<a href="https://www.instagram.com/wallpaperaccess/" class="ui header" style="font-size: 16px; font-weight: bold; line-height: 2.3;"><img src="/ig.png" alt="Instagram Badge" title="Follow us on Instagram" style="height:40px; width: auto;" /></a>\n<a href="https://twitter.com/wallpaperaccess" class="ui header" style="font-size: 16px; font-weight: bold; line-height: 2.3;"><img src="/tw.png" alt="Twitter Badge" title="Follow us on Twitter" style="height:40px; width: auto;" /></a>\n</div>\n<div class="item custom computer only">\n<a id="collection_popup" class="default_link" style="">\nCategories&nbsp;&nbsp;\xe2\x96\xbe\n</a>\n<div class="ui flowing popup categories_menu_web">\n<div class="ui two column relaxed grid">\n<div class="column">\n<div class="ui link list">\n<a href="/cat/abstract" class="item" style="color: black">\xf0\x9f\x8c\x80 Abstract</a>\n<a href="/cat/aesthetic" class="item" style="color: black">\xf0\x9f\x8c\xbb Aesthetic</a>\n<a href="/cat/animals" class="item" style="color: black">\xf0\x9f\x90\xb6 Animals</a>\n<a href="/cat/anime" class="item" style="color: black">\xf0\x9f\x92\xa5 Anime</a>\n<a href="/cat/art" class="item" style="color: black">\xf0\x9f\x8e\xa8 Art</a>\n<a href="/cat/bollywood" class="item" style="color: black">\xf0\x9f\xa4\xa9 Bollywood</a>\n<a href="/cat/cars" class="item" style="color: black">\xf0\x9f\x9a\x97 Cars</a>\n<a href="/cat/celebrities" class="item" style="color: black">\xf0\x9f\x91\xa5 Celebrities</a>\n<a href="/cat/city" class="item" style="color: black">\xf0\x9f\x8c\x86 City</a>\n<a href="/cat/colors" class="item" style="color: black">\xf0\x9f\x8c\x88 Colors</a>\n<a href="/cat/comics" class="item" style="color: black">\xf0\x9f\x97\xaf\xef\xb8\x8f Comics</a>\n<a href="/cat/devices" class="item" style="color: black">\xf0\x9f\x93\xb1 Devices</a>\n<a href="/cat/fantasy" class="item" style="color: black">\xf0\x9f\xa7\x9a Fantasy</a>\n<a href="/cat/flowers" class="item" style="color: black">\xf0\x9f\x8c\xb9 Flowers</a>\n</div>\n</div>\n<div class="column">\n<div class="ui link list">\n<a href="/cat/games" class="item" style="color: black">\xf0\x9f\x8e\xae Games</a>\n<a href="/cat/holidays" class="item" style="color: black">\xf0\x9f\x8e\x83 Holidays</a>\n<a href="/cat/horror" class="item" style="color: black">\xf0\x9f\xa7\x9f Horror</a>\n<a href="/cat/love" class="item" style="color: black">\xe2\x9d\xa4\xef\xb8\x8f Love</a>\n<a href="/cat/movies" class="item" style="color: black">\xf0\x9f\x8e\x9e\xef\xb8\x8f Movies</a>\n<a href="/cat/music" class="item" style="color: black">\xf0\x9f\x8e\xa4 Music</a>\n<a href="/cat/nature" class="item" style="color: black">\xf0\x9f\x8c\xb3 Nature</a>\n<a href="/cat/other" class="item" style="color: black">\xe2\x9e\x95 Other</a>\n<a href="/cat/resolutions" class="item" style="color: black">\xe2\x86\x94\xef\xb8\x8f Resolutions</a>\n<a href="/cat/space" class="item" style="color: black">\xf0\x9f\x9a\x80 Space</a>\n<a href="/cat/sport" class="item" style="color: black">\xf0\x9f\x8f\x80 Sport</a>\n<a href="/cat/textures" class="item" style="color: black">\xf0\x9f\x93\x9c Textures</a>\n<a href="/cat/travel" class="item" style="color: black">\xe2\x9c\x88\xef\xb8\x8f Travel</a>\n<a href="/cat/tv-shows" class="item" style="color: black">\xf0\x9f\x93\xba TV Shows</a>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="item" style="padding-right: 6px; padding-top: 1px">\n<a style="font-size: 20px;" href="javascript:void(0)" class="toc">\n<span class="custom computer only">\n<i class="icon black icon_hamburger"></i>\n</span>\n<span class="custom mobile only">\n<i class="icons">\n<i class="icon black icon_hamburger"></i>\n<i class="icon black icon_hamburger red_dot"></i>\n</i>\n</span>\n</a>\n</div>\n</div>\n</div>\n</div>\n<div class="pusher" style="padding-top: 88px">\n<div class="pusher">\n<div class="ui grid container">\n<div class="row">\n<div class="center aligned column">\n<h1 class="ui centered aligned">Search result for monkey d. luffy</h1>\n</div>\n</div>\n<div class="row">\n<div style="padding-bottom: 20px; margin-top: 10px; text-align: center;" class="center aligned column">\n<div id="div-gpt-ad-ATD_WA-D-970x250"></div>\n</div>\n</row>\n</div>\n<style>\n    /*web*/\n    .column.collection_thumb {\n        width: 338px;\n    }\n\n    .column.collection_thumb .h {\n        font-size: 13px;\n        font-weight: bold;\n        line-height: 1;\n        display: inline;\n    }\n\n    .column.collection_thumb img {\n        height: 210px;\n    }\n\n    .column.collection_thumb .one.column.grid {\n        padding-top: 6px;\n    }\n\n    /*mobile*/\n    .column.collection_thumb.mobile.only {\n        width: 363px;\n    }\n\n    .column.collection_thumb.mobile.only img {\n        height: 233px;\n    }\n</style>\n<div id="collections_segment">\n<div class="ui center aligned stackable three column grid container" style="margin-top: 20px">\n<div class="column collection_thumb">\n<a title="Monkey D. Luffy Wallpapers" class="ui fluid image" href="/monkey-d-luffy">\n<img class="preload" alt="Monkey D. Luffy Wallpaper" data-src="/thumb/1083274.jpg" data-src-retina="/thumb/1083274.jpg" src="/thumb/1083274.jpg">\n<div class="flexbox content-center" style="padding-top: 5px;">\n<div>\n<span class="ui color_black h">Monkey D. Luffy</span>\n<span class="color_gray" style="font-size: 12px !important; line-height: 1;">&nbsp;\n<i class="image icon"></i> 46 </span>\n</div>\n</div>\n</a>\n</div>\n<div class="column collection_thumb">\n<a title="Monkey D. Luffy Gear 4 Wallpapers" class="ui fluid image" href="/monkey-d-luffy-gear-4">\n<img class="preload" alt="Monkey D. Luffy Gear 4 Wallpaper" data-src="/thumb/4309079.jpg" data-src-retina="/thumb/4309079.jpg" src="/thumb/4309079.jpg">\n<div class="flexbox content-center" style="padding-top: 5px;">\n<div>\n<span class="ui color_black h">Monkey D. Luffy Gear 4</span>\n<span class="color_gray" style="font-size: 12px !important; line-height: 1;">&nbsp;\n<i class="image icon"></i> 43 </span>\n</div>\n</div>\n</a>\n</div>\n</div>\n</div>\n<div class="ui stackable doubling grid container paginator" style="margin-top: 20px">\n</div> <div class="pad20"></div>\n<script type="text/javascript">document.getElementById("search_input").focus();</script>\n<div class="small_divider"></div>\n<div class="ui doubling grid container vertical_padded20 visible footer">\n<div id="footer_container" class="row two column">\n<div class="left aligned column">\n<a class="color_black" href="/about">About Xs</a>&nbsp;&nbsp;\n<a class="color_black" href="/faq">FAQ</a>&nbsp;&nbsp;\n<a class="color_black" href="/contact">Contact</a>&nbsp;&nbsp;\n<a class="color_black" href="/terms">Terms of Use</a>&nbsp;&nbsp;\n<a class="color_black" href="/privacy">Privacy Policy</a>&nbsp;&nbsp;\n<p class="footer-about"><strong>WallpaperAccess</strong> brings you thousands of high quality images to be used as wallpaper for your computer, tablet or phone. Conveniently organized in many categories, you\'ll find images of many styles and topics.</p>\n</div>\n<div class="right aligned column">\n<a class="color_black" href="/">WallpaperAccess</a> &copy; 2021 - Wallpapers are for <a href="/faq#personaluse">personal use only</a>.\n</div>\n</div>\n</div> <a href="#0" class="cd-top">\n<i class="icon cd-top-arrow"></i>\n</a>\n</div>\n<script type="application/javascript" src="/app.js"></script>\n\n<script type="text/javascript">\n\tvar sc_project=11736144; \n\tvar sc_invisible=1; \n\tvar sc_security="0ca39bfe"; \n\tvar sc_https=1; \n\tvar sc_remove_link=1; \n\t</script>\n<script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script>\n<noscript><div class="statcounter"><img class="statcounter"\n\tsrc="//c.statcounter.com/11736144/0/0ca39bfe/1/" alt="Web\n\tAnalytics"></div></noscript>\n\n<script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon=\'{"rayId":"6840211a9cf3de7a","token":"77d2b072eaa04494b56e3b090683ed29","version":"2021.8.1","si":10}\'></script>\n</body>\n</html>\n'


browse=Search()
browse.query="monkey d. luffy"
html1=str(browse.getHTML(browse.generateURL("error")))
pat=r'<div id="collections_segment">[<>"=_:./;!&\s\d\w-]+</div>'
f=open("test.html","w+")
f.write(html1)
f.flush()
f.close()
f=open("test.html","r+")
ht=f.read()
wall=re.findall(pat,html)
print(wall)
if __name__=="__main__":pass